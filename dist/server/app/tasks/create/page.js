(()=>{var e={};e.id=208,e.ids=[208],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},68733:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var s=a(70260),r=a(28203),i=a(25155),n=a.n(i),d=a(67292),o={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);a.d(t,o);let l=["",{children:["tasks",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,70903)),"D:\\Mangos\\mangos_client_02\\src\\app\\tasks\\create\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,42813))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,35597)),"D:\\Mangos\\mangos_client_02\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,50042)),"D:\\Mangos\\mangos_client_02\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,42813))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Mangos\\mangos_client_02\\src\\app\\tasks\\create\\page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/tasks/create/page",pathname:"/tasks/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},17955:(e,t,a)=>{Promise.resolve().then(a.bind(a,39471))},32027:(e,t,a)=>{Promise.resolve().then(a.bind(a,69803))},53568:(e,t,a)=>{"use strict";a.d(t,{h:()=>v});var s=a(45512),r=a(58009),i=a(47085),n=a(45723),d=a(44195),o=a(24540),l=a(52706),c=a(99905),u=a(50983),p=a(2743);function m({className:e,classNames:t,showOutsideDays:a=!0,...r}){return(0,s.jsx)(u.hv,{showOutsideDays:a,className:(0,p.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,p.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,p.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===r.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,p.cn)((0,o.r)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>(0,s.jsx)(l.A,{className:"h-4 w-4"}),IconRight:({...e})=>(0,s.jsx)(c.A,{className:"h-4 w-4"})},...r})}m.displayName="Calendar";var x=a(55397);function f({value:e,onChange:t}){let[a,l]=r.useState(e);return(0,s.jsxs)(x.AM,{children:[(0,s.jsx)(x.Wv,{asChild:!0,children:(0,s.jsxs)(o.$,{variant:"outline",className:(0,d.cn)("w-[240px] justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[(0,s.jsx)(n.A,{}),a?(0,i.GP)(a,"PPP"):(0,s.jsx)("span",{children:"Выберите дату"})]})}),(0,s.jsx)(x.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(m,{mode:"single",selected:a||void 0,onSelect:e=>{l(e||null),t(e?(0,i.GP)(e,"yyyy-MM-dd"):"")},initialFocus:!0})})]})}var h=a(12854),y=a(56186),g=a(74038);let v=(e,t,a)=>(0,s.jsx)(s.Fragment,{children:"date"===e.type?(0,s.jsx)(f,{onChange:e=>t(e),value:e.value,...e}):"textarea"===e.type?(0,s.jsx)(g.T,{onChange:e=>t(e.target.value),value:e.value||"",...e}):"combobox"===e.type?(0,s.jsx)(y.u,{items:a[e.data_name]?.map(e=>({label:e.name,value:e.id.toString()}))||[],selectedItem:{label:e.value?.name,value:e.value?.id},onChange:e=>t(+e)}):(0,s.jsx)(h.p,{value:e.value,onChange:e=>t(e.target.value),...e,placeholder:""})})},56186:(e,t,a)=>{"use strict";a.d(t,{u:()=>y});var s=a(45512),r=a(58009),i=a(6733),n=a(98755),d=a(28638),o=a(24849),l=a(2743);let c=i.bL;i.YJ;let u=i.WT,p=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(i.l9,{ref:r,className:(0,l.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,(0,s.jsx)(i.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=i.l9.displayName;let m=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(i.PP,{ref:a,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})}));m.displayName=i.PP.displayName;let x=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(i.wn,{ref:a,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})}));x.displayName=i.wn.displayName;let f=r.forwardRef(({className:e,children:t,position:a="popper",...r},n)=>(0,s.jsx)(i.ZL,{children:(0,s.jsxs)(i.UC,{ref:n,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[(0,s.jsx)(m,{}),(0,s.jsx)(i.LM,{className:(0,l.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,s.jsx)(x,{})]})}));f.displayName=i.UC.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(i.JU,{ref:a,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",e),...t})).displayName=i.JU.displayName;let h=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(i.q7,{ref:r,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(i.p4,{children:t})]}));h.displayName=i.q7.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(i.wv,{ref:a,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.wv.displayName;let y=({placeholder:e,items:t,selectedItem:a,onChange:r})=>(0,s.jsxs)(c,{onValueChange:r,children:[(0,s.jsx)(p,{className:"w-[100%]",children:(0,s.jsx)(u,{placeholder:a?.label||e})}),(0,s.jsx)(f,{children:t.map(e=>(0,s.jsx)(h,{value:e.value,children:e.label},e.value))})]})},74864:(e,t,a)=>{"use strict";a.d(t,{J:()=>l});var s=a(45512),r=a(58009),i=a(92405),n=a(21643),d=a(2743);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(i.b,{ref:a,className:(0,d.cn)(o(),e),...t}));l.displayName=i.b.displayName},74038:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(45512),r=a(58009),i=a(2743);let n=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));n.displayName="Textarea"},69803:(e,t,a)=>{"use strict";a.d(t,{TasksCreate:()=>_});var s=a(45512),r=a(82281),i=a(93193),n=a.n(i),d=a(24540),o=a(74864),l=a(58009),c=a(28473),u=a(6736),p=a(79334),m=a(98838),x=a(84514),f=a(574),h=a(53568),y=a(84516),g=a(91903);let v=[{type:"text",id:"name",name:"name",placeholder:"Название задачи"},{type:"text",id:"description",name:"description",placeholder:"Описание задачи"},{type:"date",id:"started_at",name:"started_at",placeholder:"Дата начала"},{type:"date",id:"finished_at",name:"finished_at",placeholder:"Дата завершения"},{type:"combobox",id:"task_priority_id",name:"task_priority_id",placeholder:"Приоритет",data_name:"taskPriorities"},{type:"combobox",id:"category_id",name:"category_id",placeholder:"Категория",data_name:"categories"}],_=()=>{let e=(0,p.useRouter)(),{user:t}=(0,x.ur)(),{organization:a}=(0,x.Wf)(),{project:i}=(0,x.Om)(),{toast:_}=(0,u.dj)(),[b]=(0,c.Mj)("token",""),[w,j]=(0,l.useState)({name:"",description:"",started_at:new Date,finished_at:new Date,execution_status_id:y.J7.in_progress,task_priority_id:0,category_id:0,user_id:0,project_id:0}),[N,k]=(0,l.useState)({taskPriorities:[],categories:[]});(0,l.useEffect)(()=>{a&&k({...N,categories:a.categories})},[a]),(0,l.useEffect)(()=>{(async function(){try{let e=await (0,g.vS)(b);k({...N,taskPriorities:e.success?e.data:[]})}catch{_({variant:"destructive",title:"Ошибка",description:"Ошибка загрузки данных. Попробуйте позже"})}})()},[b]);let P=async()=>{w.user_id=t?.id,w.project_id=i?.id;let e=await (0,m.vt)(w,b);return e.success?e.data:(_({variant:"destructive",title:"Создание задачи",description:"Ошибка создания задачи. Попробуйте позже"}),null)},C=async e=>{let a={task_id:e,user_id:t?.id},s=await (0,f.vt)(a,b);return s.success?s.data:(_({variant:"destructive",title:"Привязка к задаче",description:"Ошибка привязки к задаче. Попробуйте позже"}),null)},q=async t=>{t.preventDefault();let a=await P();a&&await C(a.id)&&(_({title:"Создание задачи",description:"Задача успешно создана"}),e.push("/tasks"))};return(0,s.jsxs)("section",{className:(0,r.A)("std-center",n()["tasks-create"]),children:[(0,s.jsx)("h1",{className:(0,r.A)("std-h1",n()["tasks-create__title"]),children:"Создание задачи"}),(0,s.jsxs)("form",{className:(0,r.A)(n()["tasks-create__form"]),onSubmit:q,children:[v.map(e=>(0,s.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,s.jsx)(o.J,{htmlFor:e.name,children:e.placeholder}),(0,h.h)(e,t=>j({...w,[e.name]:t}),N)]},e.id)),(0,s.jsx)(d.$,{variant:"outline",type:"submit",className:(0,r.A)("std-button",n()["tasks-create__button"]),children:"Создать"})]})]})}},93193:e=>{e.exports={"tasks-create":"TasksCreate_tasks-create__1pPQN","tasks-create__form":"TasksCreate_tasks-create__form__47anN"}},70903:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(62740),r=a(39471);function i(){return(0,s.jsx)(r.TasksCreate,{})}},39471:(e,t,a)=>{"use strict";a.d(t,{TasksCreate:()=>s});let s=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call TasksCreate() from the server but TasksCreate is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Mangos\\mangos_client_02\\src\\views\\Tasks\\Create\\TasksCreate.tsx","TasksCreate")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,812,105,184],()=>a(68733));module.exports=s})();
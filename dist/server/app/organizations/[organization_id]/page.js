(()=>{var e={};e.id=811,e.ids=[811],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},45387:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var i=a(70260),s=a(28203),r=a(25155),n=a.n(r),o=a(67292),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);a.d(t,d);let l=["",{children:["organizations",{children:["[organization_id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,88432)),"D:\\Mangos\\mangos_client_02\\src\\app\\organizations\\[organization_id]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,42813))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,35597)),"D:\\Mangos\\mangos_client_02\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,50042)),"D:\\Mangos\\mangos_client_02\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,42813))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Mangos\\mangos_client_02\\src\\app\\organizations\\[organization_id]\\page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/organizations/[organization_id]/page",pathname:"/organizations/[organization_id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},26220:(e,t,a)=>{Promise.resolve().then(a.bind(a,46079))},13068:(e,t,a)=>{Promise.resolve().then(a.bind(a,79075))},91185:(e,t,a)=>{"use strict";a.d(t,{vS:()=>n});var i=a(98261),s=a(72043),r=a(36092);async function n(e){try{return(await i.FH.get(s.v.activity_types,(0,i.zP)(e))).data}catch(e){return(0,r.N)(e)}}},79075:(e,t,a)=>{"use strict";a.d(t,{Organization:()=>J});var i=a(45512),s=a(62767),r=a.n(s),n=a(6440),o=a(82281),d=a(77415),l=a(87798),c=a(41680);let u=(0,c.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var p=a(94520),h=a(54215);let m=()=>{let{organization:e}=(0,h.useOrganizationContext)();return(0,i.jsxs)("section",{className:(0,o.A)("std-container"),children:[(0,i.jsx)("h1",{className:(0,o.A)("std-h1"),children:e?.name}),(0,i.jsx)("p",{className:(0,o.A)(),children:e?.description})]})};var x=a(84514),v=a(7121);let g=()=>{let{organization:e}=(0,x.Wf)();return(0,i.jsxs)("section",{className:(0,o.A)("std-container"),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:(0,o.A)("std-h1"),children:"Участники"}),(0,i.jsxs)("p",{children:["Список сотрудников организации ",e?.name]})]}),(0,i.jsx)("div",{className:(0,o.A)("std-container__content"),children:(0,i.jsx)("div",{className:(0,o.A)("std-container"),children:e?.members?.map(e=>i.jsx(v.A,{member:e},e.id))})})]})};var _=a(1618),f=a(91185),j=a(62764),y=a(58986),b=a(53568),z=a(58009),N=a(21643),w=a(2743);let A=(0,N.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function P({className:e,variant:t,...a}){return(0,i.jsx)("div",{className:(0,w.cn)(A({variant:t}),e),...a})}var k=a(24540),q=a(12854),M=a(74864),C=a(55397),O=a(6736);let S=(0,c.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var D=a(28473);let E=()=>{let[e]=(0,D.Mj)("token",""),{toast:t}=(0,O.dj)(),{organization:a,updateOrganization:s}=(0,x.Wf)(),[r,n]=(0,z.useState)({description:a?.description,name:a?.name,full_name:a?.full_name,address:a?.address,phone:a?.phone,activity_type_id:a?.activity_type.id||0}),[d,l]=(0,z.useState)({tags:a?.tags||[],categories:a?.categories||[]}),[c,u]=(0,z.useState)({activityTypes:[]}),[p,h]=(0,z.useState)(""),[m,v]=(0,z.useState)(""),g=[{type:"text",id:"name",name:"name",placeholder:"Название задачи",value:r.name},{type:"text",id:"full_name",name:"full_name",placeholder:"Полное название организации",value:r.full_name},{type:"textarea",id:"description",name:"description",placeholder:"Описание организации",value:r.description},{type:"text",id:"address",name:"address",placeholder:"Адрес организации",value:r.address},{type:"tel",id:"phone",name:"phone",placeholder:"Телефон организации",value:r.phone},{type:"combobox",id:"activity_type_id",name:"activity_type_id",placeholder:"Тип активности",data_name:"activityTypes",value:{id:c.activityTypes.find(e=>e.id===r.activity_type_id)?.id||0,name:c.activityTypes.find(e=>e.id===r.activity_type_id)?.name||""}}],N=async i=>{if(i.preventDefault(),!a){t({variant:"destructive",title:"Сохранение организации",description:"Выберите организацию для сохранения её настроек"});return}if(!(await (0,_.yo)(a?.id,r,e)).success){t({variant:"destructive",title:"Сохранение организации",description:"При сохранении организации произошла ошибка. Попробуйте позже"});return}s(),t({title:"Сохранение организации",description:"Настройки организации успешно сохранены"})},w=async()=>{let i={name:p,organization_id:a?.id},s=await (0,y.vt)(i,e);if(!s.success){t({variant:"destructive",title:"Добавление тега",description:"При добавлении тега произошла ошибка. Попробуйте позже"});return}h("");let r={id:s.data.id,name:s.data.name,organization_id:a?.id||a?.id||0,created_at:s.data.created_at,updated_at:s.data.updated_at};l({...d,tags:[...d.tags,r]})},A=async()=>{let i={name:m,organization_id:a?.id},s=await (0,j.vt)(i,e);if(!s.success){t({variant:"destructive",title:"Добавление категории",description:"При добавлении категории произошла ошибка. Попробуйте позже"});return}v("");let r={id:s.data.id,name:s.data.name,organization_id:a?.id||a?.id||0,created_at:s.data.created_at,updated_at:s.data.updated_at};l({...d,categories:[...d.categories,r]})};return(0,z.useEffect)(()=>{(async function(){try{let t=await (0,f.vS)(e);u({...c,activityTypes:t.success?t.data:[]})}catch{t({variant:"destructive",title:"Ошибка",description:"Ошибка загрузки данных. Попробуйте позже"})}})()},[]),(0,i.jsxs)("section",{className:(0,o.A)("std-container"),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:(0,o.A)("std-h1"),children:"Настройки"}),(0,i.jsx)("p",{children:"Настройте параметры вашей организации"})]}),(0,i.jsxs)("form",{className:(0,o.A)("std-container__content"),onSubmit:N,children:[g.map(e=>(0,i.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,i.jsx)(M.J,{htmlFor:e.name,children:e.placeholder}),(0,b.h)(e,t=>n({...r,[e.name]:t}),c)]},e.id)),(0,i.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,i.jsx)(M.J,{htmlFor:"tags",children:"Теги"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[d?.tags.map(e=>i.jsx(P,{variant:"outline",children:e.name},e.id)),(0,i.jsxs)(C.AM,{children:[(0,i.jsx)(C.Wv,{className:"flex items-center gap-1 text-sm",children:(0,i.jsxs)(P,{children:[(0,i.jsx)(S,{width:15,height:15}),"Добавить"]})}),(0,i.jsxs)(C.hl,{className:"flex flex-col gap-2",children:[(0,i.jsx)(q.p,{value:p,onChange:e=>h(e.target.value)}),(0,i.jsx)(k.$,{variant:"outline",onClick:w,children:"Добавить"})]})]})]})]}),(0,i.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,i.jsx)(M.J,{htmlFor:"tags",children:"Категории"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[d?.categories.map(e=>i.jsx(P,{variant:"outline",children:e.name},e.id)),(0,i.jsxs)(C.AM,{children:[(0,i.jsx)(C.Wv,{className:"flex items-center gap-1 text-sm",children:(0,i.jsxs)(P,{children:[(0,i.jsx)(S,{width:15,height:15}),"Добавить"]})}),(0,i.jsxs)(C.hl,{className:"flex flex-col gap-2",children:[(0,i.jsx)(q.p,{value:m,onChange:e=>v(e.target.value)}),(0,i.jsx)(k.$,{variant:"outline",onClick:A,children:"Добавить"})]})]})]})]}),(0,i.jsx)(k.$,{variant:"outline",type:"submit",className:(0,o.A)("std-button"),children:"Сохранить"})]})]})};var F=a(98261),G=a(72043),W=a(36092);async function T(e,t){try{return(await F.FH.post(G.v.divisions,e,(0,F.zP)(t))).data}catch(e){return(0,W.N)(e)}}async function X(e,t){try{return(await F.FH.post(G.v.posts,e,(0,F.zP)(t))).data}catch(e){return(0,W.N)(e)}}var $=a(41692);let H=()=>{let[e]=(0,D.Mj)("token",""),{toast:t}=(0,O.dj)(),{user:a}=(0,x.ur)(),{organization:s,updateOrganization:r}=(0,x.Wf)(),[n,d]=(0,z.useState)(""),[l,c]=(0,z.useState)(""),u=async i=>{i.preventDefault();let o={user_id:a?.id,organization_id:s?.id,name:n};if(!(await T(o,e)).success){t({variant:"destructive",title:"Создание подразделения",description:"Ошибка создания подразделения. Попробуйте позже"});return}d(""),r(),t({title:"Создание подразделения",description:"Подразделение успешно создано"})},p=async a=>{if(!(await X({division_id:a,name:l},e)).success){t({variant:"destructive",title:"Создание должности",description:"Ошибка создания должности. Попробуйте позже"});return}c(""),r(),t({title:"Создание должности",description:"Должность успешно создана"})};return(0,i.jsxs)("section",{className:(0,o.A)("std-container"),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:(0,o.A)("std-h1"),children:"Подразделения"}),(0,i.jsx)("p",{children:"Настройте иерархию в вашей организации"})]}),(0,i.jsxs)("div",{className:(0,o.A)("std-container__content"),children:[(0,i.jsxs)($.lG,{children:[(0,i.jsx)($.zM,{className:(0,o.A)((0,k.r)({variant:"outline"}),"self-end"),children:"Создать подразделение"}),(0,i.jsx)($.Cf,{children:(0,i.jsxs)($.c7,{children:[(0,i.jsx)($.L3,{children:"Создание подразделения"}),(0,i.jsxs)("form",{className:"flex flex-col gap-2",onSubmit:u,children:[(0,i.jsx)(q.p,{value:n,onChange:e=>d(e.target.value)}),(0,i.jsx)(k.$,{variant:"outline",className:"std-button w-fit self-center",children:"Создать"})]})]})})]}),(0,i.jsx)("div",{className:"flex flex-col gap-3 w-full",children:s?.divisions.map(e=>i.jsxs("div",{className:"border border-input rounded-md shadow-sm w-full px-5 py-3",children:[i.jsx("h2",{className:"std-h2",children:e.name}),i.jsx("div",{className:"grid w-full items-center gap-1.5 mt-5",children:i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e?.posts.map(e=>i.jsx(P,{variant:"outline",className:"text-md font-normal w-max",children:e.name},e.id)),i.jsxs(C.AM,{children:[i.jsx(C.Wv,{className:"flex items-center gap-1",children:i.jsxs(P,{className:"flex gap-1 text-md",children:[i.jsx(S,{width:20,height:20}),"Добавить должность"]})}),i.jsxs(C.hl,{className:"flex flex-col gap-2",children:[i.jsx(q.p,{value:l,onChange:e=>c(e.target.value)}),i.jsx(k.$,{variant:"outline",onClick:()=>p(e.id),children:"Добавить"})]})]})]})})]},e.id))})]})]})},J=()=>(0,i.jsxs)(n.tU,{orientation:"vertical",defaultValue:"about",className:(0,o.A)(r().organization),children:[(0,i.jsxs)(n.j7,{className:(0,o.A)(r().organization__tabs),children:[(0,i.jsxs)(n.Xi,{value:"about",className:(0,o.A)(r().organization__tab),children:[(0,i.jsx)(d.A,{width:20,height:20}),"Об организации"]}),(0,i.jsxs)(n.Xi,{value:"members",className:(0,o.A)(r().organization__tab),children:[(0,i.jsx)(l.A,{width:20,height:20})," Участники"]}),(0,i.jsxs)(n.Xi,{value:"divisions",className:(0,o.A)(r().organization__tab),children:[(0,i.jsx)(u,{width:20,height:20})," Подразделения"]}),(0,i.jsxs)(n.Xi,{value:"settings",className:(0,o.A)(r().organization__tab),children:[(0,i.jsx)(p.A,{width:20,height:20})," Настройки"]})]}),(0,i.jsx)(n.av,{value:"about",className:(0,o.A)(r().organization__content),children:(0,i.jsx)(m,{})}),(0,i.jsx)(n.av,{value:"members",className:(0,o.A)(r().organization__content),children:(0,i.jsx)(g,{})}),(0,i.jsx)(n.av,{value:"divisions",className:(0,o.A)(r().organization__content),children:(0,i.jsx)(H,{})}),(0,i.jsx)(n.av,{value:"settings",className:(0,o.A)(r().organization__content),children:(0,i.jsx)(E,{})})]})},62767:e=>{e.exports={organization:"Organization_organization__B8b76",organization__tabs:"Organization_organization__tabs__hWEJv",organization__tab:"Organization_organization__tab__ZtczX",organization__content:"Organization_organization__content__hOlQY"}},88432:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,generateStaticParams:()=>r});var i=a(62740),s=a(46079);function r(){return[{id:"test"}]}function n(e){return(0,i.jsx)(s.Organization,{})}},46079:(e,t,a)=>{"use strict";a.d(t,{Organization:()=>i});let i=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call Organization() from the server but Organization is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Mangos\\mangos_client_02\\src\\views\\Organizations\\[organization_id]\\Organization.module.tsx","Organization")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[638,812,105,296,184,258],()=>a(45387));module.exports=i})();
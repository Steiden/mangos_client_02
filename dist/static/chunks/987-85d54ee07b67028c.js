(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{33:(e,a,t)=>{"use strict";t.d(a,{TF:()=>i,vt:()=>l,yo:()=>d});var s=t(676),r=t(6613),n=t(776);async function l(e,a){try{return(await s.FH.post(r.v.organization_employees,e,(0,s.zP)(a))).data}catch(e){return(0,n.N)(e)}}async function d(e,a,t){try{return(await s.FH.put("".concat(r.v.organization_employees,"/").concat(e),a,(0,s.zP)(t))).data}catch(e){return(0,n.N)(e)}}async function i(e,a){try{return(await s.FH.delete("".concat(r.v.organization_employees,"/").concat(e),(0,s.zP)(a))).data}catch(e){return(0,n.N)(e)}}},8685:(e,a,t)=>{"use strict";t.d(a,{h:()=>y});var s=t(5155),r=t(2115),n=t(32),l=t(2423),d=t(1567),i=t(7566),o=t(3518),c=t(6967),u=t(2222),m=t(7549);function f(e){let{className:a,classNames:t,showOutsideDays:r=!0,...n}=e;return(0,s.jsx)(u.hv,{showOutsideDays:r,className:(0,m.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,m.cn)((0,i.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,m.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===n.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,m.cn)((0,i.r)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{...a}=e;return(0,s.jsx)(o.A,{className:"h-4 w-4"})},IconRight:e=>{let{...a}=e;return(0,s.jsx)(c.A,{className:"h-4 w-4"})}},...n})}f.displayName="Calendar";var p=t(4765);function x(e){let{value:a,onChange:t}=e,[o,c]=r.useState(a);return(0,s.jsxs)(p.AM,{children:[(0,s.jsx)(p.Wv,{asChild:!0,children:(0,s.jsxs)(i.$,{variant:"outline",className:(0,d.cn)("w-[240px] justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[(0,s.jsx)(l.A,{}),o?(0,n.GP)(o,"PPP"):(0,s.jsx)("span",{children:"Выберите дату"})]})}),(0,s.jsx)(p.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(f,{mode:"single",selected:o||void 0,onSelect:e=>{c(e||null),t(e?(0,n.GP)(e,"yyyy-MM-dd"):"")},initialFocus:!0})})]})}var h=t(166),g=t(3486),v=t(4144);let y=(e,a,t)=>{var r,n,l;return(0,s.jsx)(s.Fragment,{children:"date"===e.type?(0,s.jsx)(x,{onChange:e=>a(e),value:e.value,...e}):"textarea"===e.type?(0,s.jsx)(v.T,{onChange:e=>a(e.target.value),value:e.value||"",...e}):"combobox"===e.type?(0,s.jsx)(g.u,{items:(null===(r=t[e.data_name])||void 0===r?void 0:r.map(e=>({label:e.name,value:e.id.toString()})))||[],selectedItem:{label:null===(n=e.value)||void 0===n?void 0:n.name,value:null===(l=e.value)||void 0===l?void 0:l.id},onChange:e=>a(+e)}):(0,s.jsx)(h.p,{value:e.value,onChange:e=>a(e.target.value),...e,placeholder:""})})}},1567:(e,a,t)=>{"use strict";t.d(a,{cn:()=>n});var s=t(3463),r=t(9795);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}},3486:(e,a,t)=>{"use strict";t.d(a,{u:()=>g});var s=t(5155),r=t(2115),n=t(7899),l=t(1719),d=t(1902),i=t(8867),o=t(7549);let c=n.bL;n.YJ;let u=n.WT,m=r.forwardRef((e,a)=>{let{className:t,children:r,...d}=e;return(0,s.jsxs)(n.l9,{ref:a,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...d,children:[r,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let f=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})});f.displayName=n.PP.displayName;let p=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=n.wn.displayName;let x=r.forwardRef((e,a)=>{let{className:t,children:r,position:l="popper",...d}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...d,children:[(0,s.jsx)(f,{}),(0,s.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(p,{})]})})});x.displayName=n.UC.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.JU,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",t),...r})}).displayName=n.JU.displayName;let h=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(n.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),(0,s.jsx)(n.p4,{children:r})]})});h.displayName=n.q7.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=n.wv.displayName;let g=e=>{let{placeholder:a,items:t,selectedItem:r,onChange:n}=e;return(0,s.jsxs)(c,{onValueChange:n,children:[(0,s.jsx)(m,{className:"w-[100%]",children:(0,s.jsx)(u,{placeholder:(null==r?void 0:r.label)||a})}),(0,s.jsx)(x,{children:t.map(e=>(0,s.jsx)(h,{value:e.value,children:e.label},e.value))})]})}},7593:(e,a,t)=>{"use strict";t.d(a,{BK:()=>i,eu:()=>d,q5:()=>o});var s=t(5155),r=t(2115),n=t(1473),l=t(7549);let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.bL,{ref:a,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});d.displayName=n.bL.displayName;let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n._V,{ref:a,className:(0,l.cn)("aspect-square h-full w-full",t),...r})});i.displayName=n._V.displayName;let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.H4,{ref:a,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});o.displayName=n.H4.displayName},1898:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>m,L3:()=>p,c7:()=>f,lG:()=>i,rr:()=>x,zM:()=>o});var s=t(5155),r=t(2115),n=t(1498),l=t(767),d=t(7549);let i=n.bL,o=n.l9,c=n.ZL;n.bm;let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.hJ,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=n.hJ.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.UC,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[r,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let f=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};f.displayName="DialogHeader";let p=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});p.displayName=n.hE.displayName;let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.VY,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",t),...r})});x.displayName=n.VY.displayName},166:(e,a,t)=>{"use strict";t.d(a,{p:()=>l});var s=t(5155),r=t(2115),n=t(7549);let l=r.forwardRef((e,a)=>{let{className:t,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});l.displayName="Input"},300:(e,a,t)=>{"use strict";t.d(a,{J:()=>o});var s=t(5155),r=t(2115),n=t(6195),l=t(1027),d=t(7549);let i=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.b,{ref:a,className:(0,d.cn)(i(),t),...r})});o.displayName=n.b.displayName},4765:(e,a,t)=>{"use strict";t.d(a,{AM:()=>d,Wv:()=>i,hl:()=>o});var s=t(5155),r=t(2115),n=t(2337),l=t(7549);let d=n.bL,i=n.l9;n.Mz;let o=r.forwardRef((e,a)=>{let{className:t,align:r="center",sideOffset:d=4,...i}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:a,align:r,sideOffset:d,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})});o.displayName=n.UC.displayName},5390:(e,a,t)=>{"use strict";t.d(a,{Xi:()=>o,av:()=>c,j7:()=>i,tU:()=>d});var s=t(5155),r=t(2115),n=t(3067),l=t(7549);let d=n.bL,i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.B8,{ref:a,className:(0,l.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...r})});i.displayName=n.B8.displayName;let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.l9,{ref:a,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...r})});o.displayName=n.l9.displayName;let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.UC,{ref:a,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});c.displayName=n.UC.displayName},4144:(e,a,t)=>{"use strict";t.d(a,{T:()=>l});var s=t(5155),r=t(2115),n=t(7549);let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...r})});l.displayName="Textarea"},795:(e,a,t)=>{"use strict";t.d(a,{A:()=>w});var s=t(5155),r=t(5050),n=t.n(r),l=t(3463),d=t(4765),i=t(6293),o=t(1600),c=t(5686),u=t(7566),m=t(6390),f=t(6870),p=t(5432),x=t(7593),h=t(4003),g=t(2499),v=t(2607),y=t(33),b=t(1898),j=t(3486),N=t(2115);let w=e=>{var a,t,r,w,_,C,z,R,A;let{member:U,isActions:k=!0,size:M="medium",className:L,...P}=e,{toast:F}=(0,f.dj)(),{updateTask:I}=(0,h.U)(),{project:T,updateProject:J}=(0,p.Om)(),{organization:O,updateOrganization:S}=(0,p.Wf)(),{user:q}=(0,p.ur)(),[H]=(0,m.Mj)("token",""),[V,W]=(0,N.useState)(0),E=async()=>{if(!(await (0,v.TF)(U.id,H)).success){F({variant:"destructive",title:"Удаление сотрудника из проекта",description:"Не удалось удалить сотрудника из проекта. Попробуйте позже"});return}J(),S(),F({title:"Удаление сотрудника из проекта",description:"Сотрудник удален из проекта"})},B=async()=>{if(!(await (0,g.TF)(U.id,H)).success){F({variant:"destructive",title:"Удаление сотрудника из задачи",description:"Не удалось удалить сотрудника из задачи. Попробуйте позже"});return}I(),J(),S(),F({title:"Удаление сотрудника из задачи",description:"Сотрудник удален из задачи"})},G=async()=>{if(!(await (0,y.TF)(U.id,H)).success){F({variant:"destructive",title:"Удаление сотрудника из организации",description:"Не удалось удалить сотрудника из организации. Попробуйте позже"});return}J(),S(),F({title:"Удаление сотрудника из организации",description:"Сотрудник удален из организации"})},$=async(e,a)=>{e.preventDefault();let t={...a,post_id:V};if(!(await (0,y.yo)(a.id,t,H)).success){F({variant:"destructive",title:"Редактирование сотрудника",description:"Не удалось редактировать сотрудника. Попробуйте позже"});return}S(),F({title:"Редактирование сотрудника",description:"Информация о сотруднике успешно изменена"})};return(0,s.jsxs)("div",{className:(0,l.A)(n().card,n()["card--".concat(M)],L),...P,children:[(0,s.jsxs)("div",{className:(0,l.A)(n().card__content),children:[(0,s.jsxs)(x.eu,{children:[(0,s.jsx)(x.BK,{src:(null===(a=U.user)||void 0===a?void 0:a.avatar)||"",alt:"avatar"}),(0,s.jsx)(x.q5,{children:null===(r=U.user)||void 0===r?void 0:null===(t=r.login)||void 0===t?void 0:t.split("")[0].toUpperCase()})]}),(0,s.jsxs)("div",{className:(0,l.A)(n().card__info),children:[(0,s.jsxs)("span",{children:[null===(w=U.user)||void 0===w?void 0:w.first_name," ",null===(_=U.user)||void 0===_?void 0:_.second_name]}),"organization"in U&&(0,s.jsx)("span",{className:"text-xs",children:null===(C=U.post)||void 0===C?void 0:C.name})]})]}),(0,s.jsx)("div",{className:(0,l.A)(n().card__actions),children:k&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(d.AM,{children:[(0,s.jsx)(d.Wv,{children:(0,s.jsx)(i.A,{})}),(0,s.jsxs)(d.hl,{className:"flex flex-col gap-1 bg-white p-1 border-2 rounded-xl w-[auto]",children:[(null==q?void 0:q.id)===(null==T?void 0:T.user.id)&&"organization"in U&&(0,s.jsxs)(b.lG,{children:[(0,s.jsxs)(b.zM,{className:(0,l.A)((0,u.r)({variant:"ghost"}),"justify-start h-[30px]"),children:[(0,s.jsx)(o.A,{}),"Редактировать"]}),(0,s.jsxs)(b.Cf,{children:[(0,s.jsx)(b.c7,{children:(0,s.jsx)(b.L3,{children:"Редактарование сотрудника"})}),(0,s.jsxs)("form",{className:"flex flex-col gap-2",onSubmit:e=>$(e,U),children:[(0,s.jsx)(j.u,{placeholder:"Выберите должность",items:(null==O?void 0:O.posts.map(e=>({label:e.name,value:e.id.toString()})))||[],selectedItem:{label:null===(z=U.post)||void 0===z?void 0:z.name,value:null===(A=U.post)||void 0===A?void 0:null===(R=A.id)||void 0===R?void 0:R.toString()},onChange:e=>W(+e)}),(0,s.jsx)(u.$,{variant:"outline",type:"submit",className:"std-button w-fit self-center",children:"Редактировать"})]})]})]}),(0,s.jsxs)(u.$,{variant:"ghost",className:"justify-start h-[30px]",onClick:"organization"in U?G:"task"in U?B:E,children:[(0,s.jsx)(c.A,{}),"Удалить"]})]})]})})})]})}},5050:e=>{e.exports={card:"UserMemberCard_card__uW1J0","card--small":"UserMemberCard_card--small__lORLC","card--large":"UserMemberCard_card--large__32K3Q",card__content:"UserMemberCard_card__content__OyqI2",card__info:"UserMemberCard_card__info__OIEOj",card__actions:"UserMemberCard_card__actions__pQpm3"}}}]);
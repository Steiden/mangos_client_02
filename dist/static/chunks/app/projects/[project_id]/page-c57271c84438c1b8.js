(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{6162:(e,t,s)=>{Promise.resolve().then(s.bind(s,6564))},2660:(e,t,s)=>{"use strict";s.d(t,{vS:()=>n});var a=s(676),r=s(6613),i=s(776);async function n(e){try{return(await a.FH.get(r.v.execution_statuses,(0,a.zP)(e))).data}catch(e){return(0,i.N)(e)}}},297:(e,t,s)=>{"use strict";s.d(t,{G7:()=>c,L$:()=>m,h_:()=>p,oI:()=>o,uB:()=>l,xL:()=>u});var a=s(5155),r=s(2115),i=s(9261),n=s(853),d=s(7549);s(1898);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.uB,{ref:t,className:(0,d.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...r})});l.displayName=i.uB.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(i.uB.Input,{ref:t,className:(0,d.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...r})]})});c.displayName=i.uB.Input.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.uB.List,{ref:t,className:(0,d.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...r})});o.displayName=i.uB.List.displayName;let u=r.forwardRef((e,t)=>(0,a.jsx)(i.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=i.uB.Empty.displayName;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.uB.Group,{ref:t,className:(0,d.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...r})});m.displayName=i.uB.Group.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.uB.Separator,{ref:t,className:(0,d.cn)("-mx-1 h-px bg-border",s),...r})}).displayName=i.uB.Separator.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.uB.Item,{ref:t,className:(0,d.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...r})});p.displayName=i.uB.Item.displayName},6564:(e,t,s)=>{"use strict";s.d(t,{Project:()=>B});var a=s(5155),r=s(4586),i=s.n(r),n=s(3463),d=s(5390),l=s(5432);let c=()=>{let{project:e}=(0,l.Om)();return(0,a.jsxs)("section",{className:(0,n.A)("std-container"),children:[(0,a.jsx)("h1",{className:(0,n.A)("std-h1"),children:null==e?void 0:e.name}),(0,a.jsx)("p",{className:(0,n.A)(),children:null==e?void 0:e.description})]})};var o=s(9216),u=s(7566),m=s(297),p=s(1898),x=s(6870),h=s(795),j=s(6390);let v=()=>{var e,t;let[s]=(0,j.Mj)("token",""),{toast:r}=(0,x.dj)(),{organization:i}=(0,l.Wf)(),{project:d,updateProject:c}=(0,l.Om)(),v=async e=>{let t={project_id:null==d?void 0:d.id,user_id:e};if(!(await (0,o.vt)(t,s)).success){r({variant:"destructive",title:"Привязка сотрудника к проекту",description:"Ошибка привязки сотрудника к проекту. Попробуйте позже"});return}c(),r({title:"Привязка сотрудника к проекту",description:"Сотрудник успешно привязан к проекту"})};return(0,a.jsxs)("section",{className:(0,n.A)("std-container"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:(0,n.A)("std-h1"),children:"Участники"}),(0,a.jsxs)("p",{children:["Список участников проекта ",null==d?void 0:d.name]})]}),(0,a.jsxs)("div",{className:(0,n.A)("std-container__content"),children:[(0,a.jsxs)(p.lG,{children:[(0,a.jsx)(p.zM,{className:(0,n.A)((0,u.r)({variant:"outline"}),"self-end"),children:"Добавить участника"}),(0,a.jsxs)(p.Cf,{children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Добавление участника в проект"}),(0,a.jsx)(p.rr,{children:"Выбор ведется только из сотрудников вашей организации"})]}),(0,a.jsxs)(m.uB,{filter:(e,t)=>e.includes(t)?1:0,children:[(0,a.jsx)(m.G7,{placeholder:"Поиск сотрудника..."}),(0,a.jsx)(m.oI,{children:(0,a.jsxs)(m.L$,{className:"py-2",children:[(0,a.jsx)(m.xL,{children:"Свободных сотрудников нет."}),null==i?void 0:null===(e=i.members)||void 0===e?void 0:e.filter(e=>!(null==d?void 0:d.members.find(t=>t.user.id===e.user.id))).map(e=>(0,a.jsx)(m.h_,{style:{background:"none",padding:"0"},children:(0,a.jsx)(h.A,{member:e,isActions:!1,size:"small",className:"cursor-pointer",onClick:()=>v(e.user.id)})},e.id))]})})]})]})]}),(0,a.jsx)("div",{className:(0,n.A)("std-container"),children:null==d?void 0:null===(t=d.members)||void 0===t?void 0:t.map(e=>(0,a.jsx)(h.A,{member:e},e.id))})]})]})};var _=s(2660),f=s(9459),N=s(8685),b=s(300),y=s(2115);let g=()=>{var e,t;let[s]=(0,j.Mj)("token",""),{toast:r}=(0,x.dj)(),{project:i,updateProject:d}=(0,l.Om)(),{updateOrganization:c}=(0,l.Wf)(),[o,m]=(0,y.useState)({name:(null==i?void 0:i.name)||"",description:(null==i?void 0:i.description)||"",execution_status_id:(null==i?void 0:i.execution_status.id)||0}),[p,h]=(0,y.useState)({executionStatuses:[]}),v=[{type:"text",id:"name",name:"name",placeholder:"Название задачи",value:o.name},{type:"text",id:"description",name:"description",placeholder:"Описание задачи",value:o.description},{type:"combobox",id:"execution_status_id",name:"execution_status_id",placeholder:"Статус выполнения",data_name:"executionStatuses",value:{id:(null===(e=p.executionStatuses.find(e=>e.id===o.execution_status_id))||void 0===e?void 0:e.id)||0,name:(null===(t=p.executionStatuses.find(e=>e.id===o.execution_status_id))||void 0===t?void 0:t.name)||""}}],g=async e=>{if(e.preventDefault(),!i){r({variant:"destructive",title:"Сохранение проекта",description:"Выберите проект для сохранения его настроек"});return}if(!(await (0,f.yo)(null==i?void 0:i.id,o,s)).success){r({variant:"destructive",title:"Сохранение проекта",description:"При сохранении проекта произошла ошибка. Попробуйте позже"});return}d(),c(),r({title:"Сохранение проекта",description:"Настройки проекта успешно сохранены"})};return(0,y.useEffect)(()=>{(async function(){let e=await (0,_.vS)(s);if(!e.success){r({variant:"destructive",title:"Загрузка страница",description:"При загрузке страницы произошла ошибка. Попробуйте позж"});return}h({...p,executionStatuses:e.data.map(e=>({id:e.id,name:e.caption}))})})()},[]),(0,a.jsxs)("section",{className:(0,n.A)("std-container"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:(0,n.A)("std-h1"),children:"Настройки"}),(0,a.jsx)("p",{children:"Настройте параметры вашего проекта"})]}),(0,a.jsxs)("form",{className:(0,n.A)("std-container__content"),onSubmit:g,children:[v.map(e=>(0,a.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,a.jsx)(b.J,{htmlFor:e.name,children:e.placeholder}),(0,N.h)(e,t=>m({...o,[e.name]:t}),p)]},e.id)),(0,a.jsx)(u.$,{variant:"outline",type:"submit",className:(0,n.A)("std-button"),children:"Сохранить"})]})]})};var w=s(4995),A=s(1466),k=s(8236);let B=()=>(0,a.jsxs)(d.tU,{orientation:"vertical",defaultValue:"about",className:(0,n.A)(i().project),children:[(0,a.jsxs)(d.j7,{className:(0,n.A)(i().project__tabs),children:[(0,a.jsxs)(d.Xi,{value:"about",className:(0,n.A)(i().project__tab),children:[(0,a.jsx)(w.A,{width:20,height:20}),"О проекте"]}),(0,a.jsxs)(d.Xi,{value:"members",className:(0,n.A)(i().project__tab),children:[(0,a.jsx)(A.A,{width:20,height:20})," Участники"]}),(0,a.jsxs)(d.Xi,{value:"settings",className:(0,n.A)(i().project__tab),children:[(0,a.jsx)(k.A,{width:20,height:20})," Настройки"]})]}),(0,a.jsx)(d.av,{value:"about",className:(0,n.A)(i().project__content),children:(0,a.jsx)(c,{})}),(0,a.jsx)(d.av,{value:"members",className:(0,n.A)(i().project__content),children:(0,a.jsx)(v,{})}),(0,a.jsx)(d.av,{value:"settings",className:(0,n.A)(i().project__content),children:(0,a.jsx)(g,{})})]})},4586:e=>{e.exports={project:"Project_project__MNOQT",project__tabs:"Project_project__tabs__I5YqG",project__tab:"Project_project__tab__VR9ax",project__content:"Project_project__content__NGSSw"}}},e=>{var t=t=>e(e.s=t);e.O(0,[173,719,478,651,9,481,544,631,945,822,778,987,441,517,358],()=>t(6162)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{1467:(e,a,s)=>{Promise.resolve().then(s.bind(s,4116))},6293:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(7401).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},5686:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(7401).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8606:(e,a,s)=>{"use strict";s.d(a,{l:()=>i});var r=s(5155),t=s(8071),d=s.n(t),l=s(7593),n=s(3463);let i=e=>{var a;let{type:s="name",user:t,direction:i="left",size:c="small",isHover:o=!1,className:u,...m}=e;return(0,r.jsxs)("div",{className:(0,n.A)(o&&"px-3 py-0.5 rounded-md transition-colors hover:bg-accent hover:text-accent-foreground",d()["user-badge"],d()["user-badge--".concat(i)],d()["user-badge--".concat(c)],u),...m,children:[(0,r.jsxs)(l.eu,{className:(0,n.A)(d()["user-badge__avatar"]),children:[(0,r.jsx)(l.BK,{src:(null==t?void 0:t.avatar)||"",alt:"avatar",className:(0,n.A)(d()["user-badge__image"])}),(0,r.jsx)(l.q5,{className:(0,n.A)(d()["user-badge__fallback"]),children:null==t?void 0:null===(a=t.login)||void 0===a?void 0:a.split("")[0].toUpperCase()})]}),"name"===s&&(0,r.jsxs)("span",{className:(0,n.A)(d()["user-badge__name"]),children:[null==t?void 0:t.second_name," ",null==t?void 0:t.first_name]})]})}},7593:(e,a,s)=>{"use strict";s.d(a,{BK:()=>i,eu:()=>n,q5:()=>c});var r=s(5155),t=s(2115),d=s(1473),l=s(7549);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(d.bL,{ref:a,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t})});n.displayName=d.bL.displayName;let i=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(d._V,{ref:a,className:(0,l.cn)("aspect-square h-full w-full",s),...t})});i.displayName=d._V.displayName;let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(d.H4,{ref:a,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t})});c.displayName=d.H4.displayName},4765:(e,a,s)=>{"use strict";s.d(a,{AM:()=>n,Wv:()=>i,hl:()=>c});var r=s(5155),t=s(2115),d=s(2337),l=s(7549);let n=d.bL,i=d.l9;d.Mz;let c=t.forwardRef((e,a)=>{let{className:s,align:t="center",sideOffset:n=4,...i}=e;return(0,r.jsx)(d.ZL,{children:(0,r.jsx)(d.UC,{ref:a,align:t,sideOffset:n,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});c.displayName=d.UC.displayName},4116:(e,a,s)=>{"use strict";s.d(a,{Tasks:()=>T});var r=s(5155),t=s(7566),d=s(5011),l=s.n(d),n=s(3463),i=s(6046),c=s(2115),o=s(7549);let u=c.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...t})});u.displayName="Card";let m=c.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s),...t})});m.displayName="CardHeader",c.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("font-semibold leading-none tracking-tight",s),...t})}).displayName="CardTitle";let f=c.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",s),...t})});f.displayName="CardDescription";let _=c.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("p-6 pt-0",s),...t})});_.displayName="CardContent";let p=c.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("flex items-center p-6 pt-0",s),...t})});p.displayName="CardFooter";var x=s(7258),h=s.n(x),g=s(2756),v=s(4765),N=s(6293);let j=(0,s(7401).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var k=s(5686),y=s(2337),b=s(6390),w=s(6870),A=s(5432),C=s(4003),R=s(8606);let U=e=>new Date(e).toLocaleDateString(),B=e=>{let{task:a}=e,s=(0,i.useRouter)(),{toast:d}=(0,w.dj)(),{setTask:l}=(0,C.U)(),{updateProject:c}=(0,A.Om)(),[o]=(0,b.Mj)("token",""),{created_at:x,finished_at:B,execution_status:T,task_priority:L,updated_at:S,user:M}=a,E=async()=>{let e=await (0,g.Jt)(a.id,o);e.success&&(l(e.data),s.push("/tasks/".concat(a.id)))},H=async()=>{if(!(await (0,g.TF)(a.id,o)).success){d({title:"Удаление задачи",description:"Произошла ошибка при удалении задачи. Попробуйте позже"});return}c(),d({title:"Удаление задачи",description:"Задача успешно удалена"})};return(0,r.jsxs)(u,{className:(0,n.A)("min-w-[300px]",h()["task-card"]),children:[(0,r.jsxs)(v.AM,{children:[(0,r.jsx)(v.Wv,{className:(0,n.A)(h()["task-card__popover"]),children:(0,r.jsx)(N.A,{})}),(0,r.jsxs)(y.hl,{className:"flex flex-col gap-1 bg-white p-1 border-2 rounded-xl",children:[(0,r.jsxs)(t.$,{variant:"ghost",className:"justify-start h-[30px]",onClick:E,children:[(0,r.jsx)(j,{}),"Посмотреть"]}),(0,r.jsxs)(t.$,{variant:"ghost",className:"justify-start h-[30px]",onClick:H,children:[(0,r.jsx)(k.A,{}),"Удалить"]})]})]}),(0,r.jsx)(m,{className:"task-card__header",children:(0,r.jsx)(f,{children:U(x)})}),(0,r.jsxs)(_,{className:"flex flex-col gap-2",children:[(0,r.jsxs)("p",{className:(0,n.A)(h()["task-card__text"]),children:["Срок:"," ",(0,r.jsx)("span",{className:(0,n.A)(h()["task-card__span"]),children:U(B)})]}),(0,r.jsxs)("p",{className:(0,n.A)(h()["task-card__text"]),children:["Статус:"," ",(0,r.jsx)("span",{className:(0,n.A)(h()["task-card__span"]),children:T.caption})]}),(0,r.jsxs)("p",{className:(0,n.A)(h()["task-card__text"]),children:["Приоритет:"," ",(0,r.jsx)("span",{className:(0,n.A)(h()["task-card__span"]),children:L.name})]})]}),(0,r.jsxs)(p,{className:"flex flex-col gap-2 items-start",children:[(0,r.jsxs)("p",{className:(0,n.A)(h()["task-card__text"]),children:["Обновлено:"," ",(0,r.jsx)("span",{className:(0,n.A)(h()["task-card__span"]),children:U(S)})]}),(0,r.jsx)(R.l,{type:"name",user:M})]})]})},T=()=>{var e;let a=(0,i.useRouter)(),{project:s}=(0,A.Om)();return(0,r.jsxs)("section",{className:(0,n.A)("std-page",l().tasks),children:[(0,r.jsx)("h1",{className:(0,n.A)("std-h1",l().tasks__title),children:"Задачи"}),(0,r.jsxs)("div",{className:(0,n.A)("std-container","std-page__content"),children:[(0,r.jsx)(t.$,{variant:"outline",className:"self-end",onClick:()=>a.push("/tasks/create"),children:"Создать задачу"}),(0,r.jsx)("div",{className:(0,n.A)("std-container",l()["tasks__card-grid"]),children:null==s?void 0:null===(e=s.tasks)||void 0===e?void 0:e.map(e=>(0,r.jsx)(B,{task:e},e.id))})]})]})}},8071:e=>{e.exports={"user-badge":"UserBadge_user-badge__F_E_T","user-badge--left":"UserBadge_user-badge--left__rHPS_","user-badge--right":"UserBadge_user-badge--right__J26Fk","user-badge--small":"UserBadge_user-badge--small__sAB6U","user-badge__avatar":"UserBadge_user-badge__avatar__AK48_","user-badge__name":"UserBadge_user-badge__name__4A5tf"}},5011:e=>{e.exports={"tasks__card-grid":"Tasks_tasks__card-grid__jUjaN"}},7258:e=>{e.exports={"task-card":"TaskCard_task-card__5RbBw","task-card__header":"TaskCard_task-card__header__4IUKx","task-card__popover":"TaskCard_task-card__popover__BRh_r"}},1473:(e,a,s)=>{"use strict";s.d(a,{H4:()=>k,_V:()=>j,bL:()=>N});var r=s(2115),t=s(8166),d=s(1524),l=s(6611);s(7650);var n=s(4707),i=s(5155),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let s=r.forwardRef((e,s)=>{let{asChild:r,...t}=e,d=r?n.DX:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(d,{...t,ref:s})});return s.displayName=`Primitive.${a}`,{...e,[a]:s}},{}),o="Avatar",[u,m]=(0,t.A)(o),[f,_]=u(o),p=r.forwardRef((e,a)=>{let{__scopeAvatar:s,...t}=e,[d,l]=r.useState("idle");return(0,i.jsx)(f,{scope:s,imageLoadingStatus:d,onImageLoadingStatusChange:l,children:(0,i.jsx)(c.span,{...t,ref:a})})});p.displayName=o;var x="AvatarImage",h=r.forwardRef((e,a)=>{let{__scopeAvatar:s,src:t,onLoadingStatusChange:n=()=>{},...o}=e,u=_(x,s),m=function(e,a){let[s,t]=r.useState("idle");return(0,l.N)(()=>{if(!e){t("error");return}let s=!0,r=new window.Image,d=e=>()=>{s&&t(e)};return t("loading"),r.onload=d("loaded"),r.onerror=d("error"),r.src=e,a&&(r.referrerPolicy=a),()=>{s=!1}},[e,a]),s}(t,o.referrerPolicy),f=(0,d.c)(e=>{n(e),u.onImageLoadingStatusChange(e)});return(0,l.N)(()=>{"idle"!==m&&f(m)},[m,f]),"loaded"===m?(0,i.jsx)(c.img,{...o,ref:a,src:t}):null});h.displayName=x;var g="AvatarFallback",v=r.forwardRef((e,a)=>{let{__scopeAvatar:s,delayMs:t,...d}=e,l=_(g,s),[n,o]=r.useState(void 0===t);return r.useEffect(()=>{if(void 0!==t){let e=window.setTimeout(()=>o(!0),t);return()=>window.clearTimeout(e)}},[t]),n&&"loaded"!==l.imageLoadingStatus?(0,i.jsx)(c.span,{...d,ref:a}):null});v.displayName=g;var N=p,j=h,k=v}},e=>{var a=a=>e(e.s=a);e.O(0,[225,478,651,9,481,778,441,517,358],()=>a(1467)),_N_E=e.O()}]);